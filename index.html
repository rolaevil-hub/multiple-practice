<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å€æ•¸åˆ¤æ–·ç·šä¸Šç·´ç¿’</title>
<style>
body {
    font-family: "Microsoft JhengHei", "PingFang TC", Arial, sans-serif;
    background-color: #f4f8f9;
    color: #333;
    line-height: 1.8;
    margin: 0;
    padding: 0;
}
.container {
    max-width: 800px;
    margin: 20px auto;
    padding: 25px;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
h1 {
    text-align: center;
    color: #0056b3;
    border-bottom: 2px solid #0056b3;
    padding-bottom: 10px;
}
h2 {
    color: #007bff;
    background-color: #e7f3ff;
    padding: 12px 18px;
    border-radius: 8px;
    margin-top: 30px;
}
h3 {
    color: #1a6a3a;
    border-left: 5px solid #28a745;
    padding-left: 10px;
    margin-top: 25px;
}
.rule-section {
    margin-bottom: 30px;
    border-top: 1px solid #eee;
    padding-top: 20px;
}
.rule-description, .example {
    background-color: #fdfdee;
    border: 1px solid #f0e68c;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
}
.question {
    padding: 15px;
    margin-bottom: 12px;
    background-color: #fafafa;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    font-size: 1.1em;
}
.question-text { margin-right: 20px; font-weight: 500; }
.question label { margin: 0 10px; cursor: pointer; }
.question input[type="radio"] {
    margin-right: 5px; transform: scale(1.2); vertical-align: middle;
}
.question input[type="text"] {
    font-size: 1em; padding: 8px; border: 1px solid #ccc; border-radius: 4px;
    margin: 5px 10px 5px 0; width: 200px;
}
.check-btn {
    background-color: #007bff; color: white; border: none;
    padding: 8px 15px; border-radius: 5px; cursor: pointer;
    font-weight: bold;
}
.check-btn:hover { background-color: #0056b3; }
.feedback { margin-left: 15px; font-weight: bold; font-size: 1.1em; }
.feedback.correct { color: #28a745; }
.feedback.incorrect { color: #dc3545; }
#reset-btn, #score-btn {
    display: block; margin: 20px auto;
    border: none; padding: 12px 25px; border-radius: 5px;
    cursor: pointer; font-size: 1.1em; font-weight: bold; color: white;
}
#reset-btn { background-color: #dc3545; }
#reset-btn:hover { background-color: #c82333; }
#score-btn { background-color: #17a2b8; }
#score-btn:hover { background-color: #138496; }
#score-output {
    text-align: center; font-weight: bold;
    font-size: 1.2em; color: #0056b3;
}
@media (max-width:600px){
  .question { flex-direction: column; align-items: flex-start; }
}
</style>
</head>
<body>
<div class="container">
    <h1>ğŸ”¢ å€æ•¸åˆ¤æ–·ç·šä¸Šç·´ç¿’</h1>
    <p>è«‹æ ¹æ“šè¦å‰‡ï¼Œåˆ¤æ–·ä¸‹åˆ—æ•¸å­—ã€‚å®Œæˆé¸æ“‡å¾Œï¼ŒæŒ‰ä¸‹ã€Œæª¢æŸ¥ã€æŒ‰éˆ•çœ‹çœ‹ä½ æ˜¯å¦ç­”å°äº†ï¼</p>
    <button id="reset-btn">å…¨éƒ¨é‡ä¾†</button>

    <!-- ç¯„ä¾‹é¡Œå€ï¼ˆç¤ºæ„ä¿ç•™åŸçµæ§‹ï¼‰ -->
    <div class="rule-section">
        <h2>äºŒã€2çš„å€æ•¸ç°¡æ˜“åˆ¤æ–·æ³•</h2>
        <p class="rule-description">å€‹ä½æ•¸æ˜¯0ã€2ã€4ã€6ã€8çš„æ•´æ•¸ï¼Œæ˜¯2çš„å€æ•¸ã€‚</p>
        <div class="question" data-answer="not" data-id="q1_1">
            <span class="question-text">1. 55</span>
            <label><input type="radio" name="q1_1" value="is">æ˜¯</label>
            <label><input type="radio" name="q1_1" value="not">ä¸æ˜¯</label>
            <button class="check-btn">æª¢æŸ¥</button><span class="feedback"></span>
        </div>
        <div class="question fill-in" data-answer="1,4,7" data-id="q3_fill">
            <span class="question-text">è‹¥ã€Œ23â–¡ã€æ˜¯3çš„å€æ•¸ï¼Œâ–¡ï¼ï¼Ÿ</span>
            <input type="text" class="fill-in-answer" placeholder="å¡«å…¥æ‰€æœ‰å¯èƒ½æ•¸å­—,ç”¨é€—è™Ÿ,åˆ†éš”">
            <button class="check-btn">æª¢æŸ¥</button><span class="feedback"></span>
        </div>
    </div>

    <button id="score-btn">æŸ¥çœ‹åˆ†æ•¸</button>
    <p id="score-output"></p>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {

  // --- å„²å­˜èˆ‡è¼‰å…¥åŠŸèƒ½ ---
  const STORAGE_KEY = "multiple_quiz_progress";
  function saveProgress() {
      const data = {};
      document.querySelectorAll('.question').forEach(q => {
          const id = q.dataset.id;
          if(!id) return;
          if(q.classList.contains('fill-in')){
              const val = q.querySelector('.fill-in-answer').value;
              data[id] = { type:'text', value: val };
          } else {
              const sel = q.querySelector('input[type="radio"]:checked');
              data[id] = { type:'radio', value: sel ? sel.value : "" };
          }
      });
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }
  function loadProgress() {
      const data = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
      Object.entries(data).forEach(([id, item])=>{
          const q = document.querySelector(`[data-id="${id}"]`);
          if(!q) return;
          if(item.type === 'text'){
              q.querySelector('.fill-in-answer').value = item.value || "";
          } else if(item.type === 'radio' && item.value){
              const r = q.querySelector(`input[type="radio"][value="${item.value}"]`);
              if(r) r.checked = true;
          }
      });
  }

  // --- ç­”é¡Œåˆ¤æ–· ---
  function normalizeAnswer(input){
      return input.replace(/ï¼Œ/g,',').split(',')
          .map(s=>s.trim()).filter(Boolean).sort().join(',');
  }

  document.querySelectorAll('.check-btn').forEach(btn=>{
      btn.addEventListener('click',()=>{
          const q=btn.parentElement;
          const ans=q.dataset.answer;
          const fb=q.querySelector('.feedback');
          let correct=false;
          if(q.classList.contains('fill-in')){
              const val=normalizeAnswer(q.querySelector('.fill-in-answer').value);
              if(!val){fb.textContent='è«‹å¡«å…¥ç­”æ¡ˆ';fb.className='feedback incorrect';return;}
              correct=(val===ans);
          }else{
              const sel=q.querySelector('input[type="radio"]:checked');
              if(!sel){fb.textContent='è«‹é¸æ“‡ç­”æ¡ˆ';fb.className='feedback incorrect';return;}
              correct=(sel.value===ans);
          }
          fb.textContent=correct?'ç­”å°äº†ï¼ğŸ‰':'å†è©¦ä¸€æ¬¡ï¼ğŸ’ª';
          fb.className='feedback '+(correct?'correct':'incorrect');
          saveProgress(); // â¬…ï¸ æ¯æ¬¡æª¢æŸ¥å¾Œå„²å­˜é€²åº¦
      });
  });

  // --- å³æ™‚å„²å­˜è¼¸å…¥ ---
  document.querySelectorAll('input[type="radio"], input[type="text"]').forEach(el=>{
      el.addEventListener('input', saveProgress);
      el.addEventListener('change', saveProgress);
  });

  // --- å…¨éƒ¨é‡ä¾† ---
  document.getElementById('reset-btn').addEventListener('click',()=>{
      localStorage.removeItem(STORAGE_KEY);
      document.querySelectorAll('input[type="radio"]').forEach(r=>r.checked=false);
      document.querySelectorAll('input[type="text"]').forEach(i=>i.value='');
      document.querySelectorAll('.feedback').forEach(fb=>{fb.textContent='';fb.className='feedback';});
      document.getElementById('score-output').textContent='';
  });

  // --- æŸ¥çœ‹åˆ†æ•¸ ---
  document.getElementById('score-btn').addEventListener('click',()=>{
      const qs=document.querySelectorAll('.question');
      let c=0,t=qs.length;
      qs.forEach(q=>{
          const a=q.dataset.answer;
          if(q.classList.contains('fill-in')){
              if(normalizeAnswer(q.querySelector('.fill-in-answer').value)===a)c++;
          }else{
              const s=q.querySelector('input[type="radio"]:checked');
              if(s&&s.value===a)c++;
          }
      });
      document.getElementById('score-output').textContent=`å…± ${t} é¡Œï¼Œç­”å° ${c} é¡Œï¼Œæ­£ç¢ºç‡ ${(c/t*100).toFixed(0)}%`;
  });

  // --- å•Ÿå‹•æ™‚è¼‰å…¥èˆŠé€²åº¦ ---
  loadProgress();

});
</script>
</body>
</html>
